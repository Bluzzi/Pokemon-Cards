import{S as t,i as e,s as n,e as s,c as o,b as a,f as l,I as r,J as c,O as i,d as u,k as d,N as f,n as h,a as g,E as m,F as p,r as v,u as w,v as y,P as $,B as I,G as x,j as k,m as E,o as b,w as q,l as C,H}from"../../chunks/vendor-b580bf66.js";import{c as P,E as j,a as G}from"../../chunks/Store-be709d3a.js";function M(t){let e,n,d,f,h;return{c(){e=s("img"),this.h()},l(t){e=o(t,"IMG",{src:!0,alt:!0,loading:!0,class:!0}),this.h()},h(){e.src!==(n=t[0].images.small)&&a(e,"src",n),a(e,"alt",d=t[0].name+" card"),a(e,"loading","lazy"),a(e,"class","svelte-14avgyx")},m(t,n){l(t,e,n),h=!0},p(t,[s]){(!h||1&s&&e.src!==(n=t[0].images.small))&&a(e,"src",n),(!h||1&s&&d!==(d=t[0].name+" card"))&&a(e,"alt",d)},i(t){h||(r((()=>{f||(f=c(e,i,{},!0)),f.run(1)})),h=!0)},o(t){f||(f=c(e,i,{},!1)),f.run(0),h=!1},d(t){t&&u(e),t&&f&&f.end()}}}function S(t,e,n){let{card:s}=e;return s.set.id.toUpperCase(),s.set.id.toUpperCase(),s.number,t.$$set=t=>{"card"in t&&n(0,s=t.card)},[s]}class z extends t{constructor(t){super(),e(this,t,S,M,n,{card:0})}}async function B(t,e={}){const n=await fetch(t,e);if(n.ok)return await n.json();throw new Error("Request failed")}function D(t,e,n){const s=t.slice();return s[7]=e[n],s}function N(t){let e,n;return{c(){e=s("img"),this.h()},l(t){e=o(t,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){e.src!==(n=t[0].images.logo)&&a(e,"src",n),a(e,"alt","serie logo"),a(e,"class","header svelte-1yq806s")},m(t,n){l(t,e,n)},p(t,s){1&s&&e.src!==(n=t[0].images.logo)&&a(e,"src",n)},d(t){t&&u(e)}}}function T(t){let e,n;return{c(){e=s("img"),this.h()},l(t){e=o(t,"IMG",{src:!0,alt:!0}),this.h()},h(){e.src!==(n="/img/loading.svg")&&a(e,"src","/img/loading.svg"),a(e,"alt","loading")},m(t,n){l(t,e,n)},p:x,i:x,o:x,d(t){t&&u(e)}}}function U(t){let e,n,s=t[1],o=[];for(let l=0;l<s.length;l+=1)o[l]=V(D(t,s,l));const a=t=>v(o[t],1,1,(()=>{o[t]=null}));return{c(){for(let t=0;t<o.length;t+=1)o[t].c();e=C()},l(t){for(let e=0;e<o.length;e+=1)o[e].l(t);e=C()},m(t,s){for(let e=0;e<o.length;e+=1)o[e].m(t,s);l(t,e,s),n=!0},p(t,n){if(2&n){let l;for(s=t[1],l=0;l<s.length;l+=1){const a=D(t,s,l);o[l]?(o[l].p(a,n),y(o[l],1)):(o[l]=V(a),o[l].c(),y(o[l],1),o[l].m(e.parentNode,e))}for(I(),l=s.length;l<o.length;l+=1)a(l);w()}},i(t){if(!n){for(let t=0;t<s.length;t+=1)y(o[t]);n=!0}},o(t){o=o.filter(Boolean);for(let e=0;e<o.length;e+=1)v(o[e]);n=!1},d(t){H(o,t),t&&u(e)}}}function V(t){let e,n;return e=new z({props:{card:t[7]}}),{c(){k(e.$$.fragment)},l(t){E(e.$$.fragment,t)},m(t,s){b(e,t,s),n=!0},p(t,n){const s={};2&n&&(s.card=t[7]),e.$set(s)},i(t){n||(y(e.$$.fragment,t),n=!0)},o(t){v(e.$$.fragment,t),n=!1},d(t){q(e,t)}}}function _(t){var e,n,r;let c,i,$,x,k,E,b,q,C,H;document.title=c="Pokemon Cards - "+(null==(e=t[0])?void 0:e.series);let P=(null==(r=null==(n=t[0])?void 0:n.images)?void 0:r.logo)&&N(t);const j=[U,T],G=[];function M(t,e){return t[1].length>0?0:1}return E=M(t),b=G[E]=j[E](t),{c(){i=d(),$=s("div"),P&&P.c(),x=d(),k=s("div"),b.c(),this.h()},l(t){f('[data-svelte="svelte-4gk4uf"]',document.head).forEach(u),i=h(t),$=o(t,"DIV",{class:!0});var e=g($);P&&P.l(e),x=h(e),k=o(e,"DIV",{class:!0});var n=g(k);b.l(n),n.forEach(u),e.forEach(u),this.h()},h(){a(k,"class","cards svelte-1yq806s"),a($,"class","serie svelte-1yq806s")},m(e,n){l(e,i,n),l(e,$,n),P&&P.m($,null),m($,x),m($,k),G[E].m(k,null),q=!0,C||(H=p(k,"scroll",t[2]),C=!0)},p(t,[e]){var n,s,o;(!q||1&e)&&c!==(c="Pokemon Cards - "+(null==(n=t[0])?void 0:n.series))&&(document.title=c),(null==(o=null==(s=t[0])?void 0:s.images)?void 0:o.logo)?P?P.p(t,e):(P=N(t),P.c(),P.m($,x)):P&&(P.d(1),P=null);let a=E;E=M(t),E===a?G[E].p(t,e):(I(),v(G[a],1,1,(()=>{G[a]=null})),w(),b=G[E],b?b.p(t,e):(b=G[E]=j[E](t),b.c()),y(b,1),b.m(k,null))},i(t){q||(y(b),q=!0)},o(t){v(b),q=!1},d(t){t&&u(i),t&&u($),P&&P.d(),G[E].d(),C=!1,H()}}}var F=function(t,e,n,s){return new(n||(n=Promise))((function(o,a){function l(t){try{c(s.next(t))}catch(e){a(e)}}function r(t){try{c(s.throw(t))}catch(e){a(e)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(l,r)}c((s=s.apply(t,e||[])).next())}))};function J({page:t,fetch:e,session:n,context:s}){return F(this,void 0,void 0,(function*(){return{props:{setId:t.params.id}}}))}function O(t,e,n){let s,o;$(t,P,(t=>n(0,s=t))),$(t,G,(t=>n(1,o=t)));var a=this&&this.__awaiter||function(t,e,n,s){return new(n||(n=Promise))((function(o,a){function l(t){try{c(s.next(t))}catch(e){a(e)}}function r(t){try{c(s.throw(t))}catch(e){a(e)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(l,r)}c((s=s.apply(t,e||[])).next())}))};let{setId:l}=e;s||a(void 0,void 0,void 0,(function*(){return P.set((yield B(j.sets+"/"+l)).data)}));let r=0;return function(t=1){B(j.cards+"?page="+t+"&pageSize=25&q=set.id:"+l).then((t=>{G.update((e=>e.concat(t.data))),r=t.totalCount}))}(),t.$$set=t=>{"setId"in t&&n(3,l=t.setId)},[s,o,function(t){const e=t.target;console.log(e.scrollTop+window.innerHeight),console.log(e.scrollHeight),e.scrollTop+window.innerHeight>=e.scrollHeight&&console.log(25,r)},l]}export default class extends t{constructor(t){super(),e(this,t,O,_,n,{setId:3})}}export{J as load};
